#!/bin/sh

echo "Running lint:fix before push..."
bun run lint:fix

if [ $? -ne 0 ]; then
	echo ""
	echo "Linting failed. Push aborted."
	exit 1
fi

# Stage any files that were fixed by linter
git add -A

echo "Running tests before push..."
bun test

if [ $? -ne 0 ]; then
	echo ""
	echo "Tests failed. Push aborted."
	echo "Fix the failing tests and try again."
	exit 1
fi
